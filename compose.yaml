services:
  portfolio-backend:
    build: ./backend
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.portfolio-backend.rule=Host(`api.megitsune.xyz`)"
      - "traefik.http.routers.portfolio-backend.entrypoints=websecure"
      - "traefik.http.routers.portfolio-backend.service=portfolio-backend-service"
      - "traefik.http.services.portfolio-backend-service.loadbalancer.server.port=3000"
      - "traefik.http.routers.portfolio-backend.tls=true"
    env_file:
      - .env
    restart: unless-stopped
    volumes:
      - ./.env:/app/.env
    networks:
      - web

networks:
  web:
    name: web
    external: true